# Exam System Database Tables

## 1. Users Table
```
users
├── user_id (PK)
├── username (UNIQUE)
├── password (encrypted, min 8 chars)
├── name
├── email
├── mobile_number
├── role (Super Admin, Admin, Editor, Examinee)
├── status (active, banned)
├── created_at
├── updated_at
└── last_login
```

## 2. Packages Table
```
packages
├── package_id (PK)
├── package_name
├── start_time
├── end_time
├── duration_minutes
├── per_page_questions
├── each_question_mark
├── negative_mark
├── pass_mark
├── instant_result (Yes/No)
├── details_result (Yes/No)
├── merit_position (Yes/No)
├── free_exam (Yes/No)
├── total_examinee
├── max_concurrent_examinee
├── created_by (FK - users)
├── created_at
└── updated_at
```

## 3. Categories Table
```
categories
├── category_id (PK)
├── package_id (FK - packages)
├── category_name
├── total_questions
├── selected_questions
├── created_at
└── updated_at
```

## 4. Questions Table
```
questions
├── question_id (PK)
├── category_id (FK - categories)
├── package_id (FK - packages)
├── question_text
├── question_image (optional)
├── marks
├── negative_mark
├── shuffle_status
├── created_by (FK - users)
├── created_at
└── updated_at
```

## 5. Question Options Table
```
question_options
├── option_id (PK)
├── question_id (FK - questions)
├── option_text
├── option_image (optional)
├── is_correct
├── option_order
└── created_at
```

## 6. Exams Table
```
exams
├── exam_id (PK)
├── exam_name
├── package_id (FK - packages)
├── category_id (FK - categories)
├── user_id (FK - users)
├── start_time
├── end_time
├── duration_seconds
├── status (in_progress, submitted, disconnected)
├── auto_submitted
├── created_at
└── updated_at
```

## 7. User Answers Table
```
user_answers
├── answer_id (PK)
├── exam_id (FK - exams)
├── user_id (FK - users)
├── question_id (FK - questions)
├── selected_option_id (FK - question_options)
├── is_correct
├── marks_obtained
├── answered_at
└── updated_at
```

## 8. Results Table
```
results
├── result_id (PK)
├── exam_id (FK - exams)
├── user_id (FK - users)
├── package_id (FK - packages)
├── total_questions
├── right_answers
├── wrong_answers
├── negative_marks
├── obtained_marks
├── percentage
├── time_spent_seconds
├── merit_position
├── status (passed, failed)
├── result_published (Yes/No)
├── published_at
├── created_at
└── updated_at
```

## 9. Instructions Table
```
instructions
├── instruction_id (PK)
├── package_id (FK - packages)
├── instruction_text
├── formatting_enabled
├── created_by (FK - users)
├── created_at
└── updated_at
```

## 10. Messages Table
```
messages
├── message_id (PK)
├── sender_id (FK - users)
├── recipient_id (FK - users)
├── subject
├── message_text
├── message_type (inquiry, support)
├── status (sent, read)
├── created_at
├── read_at
└── reply_id (self-join, nullable)
```

## 11. Notifications Table
```
notifications
├── notification_id (PK)
├── user_id (FK - users)
├── type (exam_alert, result_ready, message)
├── title
├── description
├── exam_id (FK - exams, nullable)
├── is_read
├── created_at
└── read_at
```

## 12. Admin Logs Table
```
admin_logs
├── log_id (PK)
├── admin_id (FK - users)
├── action (create, edit, delete, ban_user, re_exam)
├── entity_type (user, package, question, exam)
├── entity_id
├── details
├── created_at
└── ip_address
```

## 13. Re-Exam Table
```
re_exams
├── re_exam_id (PK)
├── exam_id (FK - exams)
├── user_id (FK - users)
├── package_id (FK - packages)
├── reason
├── approved_by (FK - users)
├── new_exam_id (FK - exams, nullable)
├── approved_at
├── created_at
└── updated_at
```

## 14. Analysis Table
```
analysis
├── analysis_id (PK)
├── package_id (FK - packages)
├── total_examinee
├── participants
├── passed_count
├── failed_count
├── average_marks
├── participants_above_80
├── participants_above_70
├── participants_above_60
├── participants_above_50
├── participants_below_50
├── participants_below_40
├── participants_below_20
├── participants_below_10
├── generated_at
└── pdf_path
```

## 15. User Packages Table (Junction Table)
```
user_packages
├── user_package_id (PK)
├── user_id (FK - users)
├── package_id (FK - packages)
├── access_type (free, paid)
├── assigned_at
└── expires_at (nullable)
```

## Key Relationships

- **Users** ← → **Packages** (Many-to-Many via user_packages)
- **Packages** → **Categories** (One-to-Many)
- **Categories** → **Questions** (One-to-Many)
- **Questions** → **Question Options** (One-to-Many)
- **Users** → **Exams** (One-to-Many)
- **Packages** → **Exams** (One-to-Many)
- **Exams** → **User Answers** (One-to-Many)
- **Exams** → **Results** (One-to-One)
- **Users** → **Messages** (One-to-Many as sender/recipient)
- **Exams** → **Re-Exams** (One-to-Many)
