<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ER Diagram Slide</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body style="margin: 0; padding: 20px; background: #f5f5f5; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    <div style="text-align: center; margin-bottom: 20px;">
        <h1>ER Diagram Slide</h1>
        <button onclick="downloadPNG()" style="padding: 10px 20px; font-size: 16px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">
            ğŸ“¥ Download as PNG
        </button>
    </div>

    <div id="slide" style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 50%, #ffffff 100%); padding: 60px; margin: 0 auto; width: fit-content; border-radius: 16px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); max-width: 1400px; aspect-ratio: 16/9;">
        
        <div style="display: flex; flex-direction: column; height: 100%; justify-content: space-between;">
            
            <!-- Header -->
            <div style="text-align: center; margin-bottom: 40px;">
                <h1 style="font-size: 48px; color: #1a1a1a; margin: 0 0 10px 0; font-weight: 800;">ğŸ—„ï¸ ER Diagram - Database Design</h1>
                <p style="font-size: 16px; color: #555555; margin: 0;">ICS Quiz System Data Model</p>
            </div>

            <!-- Main Content Grid -->
            <div style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 40px; flex: 1; margin-bottom: 40px; align-items: center;">
                
                <!-- ER Diagram Visualization -->
                <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%); border-radius: 14px; padding: 30px; border: 2px solid #bbdefb; box-shadow: 0 8px 16px rgba(0,0,0,0.08); position: relative; min-height: 350px; display: flex; align-items: center; justify-content: center;">
                    
                    <svg width="100%" height="100%" viewBox="0 0 500 350" style="max-height: 350px;">
                        <!-- Users Table -->
                        <rect x="20" y="20" width="140" height="140" fill="#2196F3" stroke="#1565C0" stroke-width="2" rx="4"/>
                        <text x="90" y="40" text-anchor="middle" font-size="14" font-weight="bold" fill="white">USERS</text>
                        <line x1="20" y1="50" x2="160" y2="50" stroke="#1565C0" stroke-width="1"/>
                        <text x="30" y="65" font-size="11" fill="white">ğŸ”‘ user_id (PK)</text>
                        <text x="30" y="80" font-size="11" fill="white">email</text>
                        <text x="30" y="95" font-size="11" fill="white">phone</text>
                        <text x="30" y="110" font-size="11" fill="white">password_hash</text>
                        <text x="30" y="125" font-size="11" fill="white">created_at</text>
                        <text x="30" y="140" font-size="11" fill="white">status</text>

                        <!-- Exams Table -->
                        <rect x="200" y="20" width="140" height="140" fill="#4CAF50" stroke="#2E7D32" stroke-width="2" rx="4"/>
                        <text x="270" y="40" text-anchor="middle" font-size="14" font-weight="bold" fill="white">EXAMS</text>
                        <line x1="200" y1="50" x2="340" y2="50" stroke="#2E7D32" stroke-width="1"/>
                        <text x="210" y="65" font-size="11" fill="white">ğŸ”‘ exam_id (PK)</text>
                        <text x="210" y="80" font-size="11" fill="white">title</text>
                        <text x="210" y="95" font-size="11" fill="white">duration</text>
                        <text x="210" y="110" font-size="11" fill="white">total_questions</text>
                        <text x="210" y="125" font-size="11" fill="white">start_time</text>
                        <text x="210" y="140" font-size="11" fill="white">end_time</text>

                        <!-- Questions Table -->
                        <rect x="380" y="20" width="100" height="140" fill="#FF9800" stroke="#E65100" stroke-width="2" rx="4"/>
                        <text x="430" y="40" text-anchor="middle" font-size="14" font-weight="bold" fill="white">QUESTIONS</text>
                        <line x1="380" y1="50" x2="480" y2="50" stroke="#E65100" stroke-width="1"/>
                        <text x="390" y="65" font-size="10" fill="white">ğŸ”‘ q_id (PK)</text>
                        <text x="390" y="78" font-size="10" fill="white">ğŸ”— exam_id (FK)</text>
                        <text x="390" y="91" font-size="10" fill="white">question_text</text>
                        <text x="390" y="104" font-size="10" fill="white">options</text>
                        <text x="390" y="117" font-size="10" fill="white">correct_ans</text>
                        <text x="390" y="130" font-size="10" fill="white">marks</text>

                        <!-- Submissions Table -->
                        <rect x="80" y="200" width="150" height="120" fill="#E91E63" stroke="#AD1457" stroke-width="2" rx="4"/>
                        <text x="155" y="220" text-anchor="middle" font-size="14" font-weight="bold" fill="white">SUBMISSIONS</text>
                        <line x1="80" y1="230" x2="230" y2="230" stroke="#AD1457" stroke-width="1"/>
                        <text x="90" y="245" font-size="11" fill="white">ğŸ”‘ sub_id (PK)</text>
                        <text x="90" y="260" font-size="11" fill="white">ğŸ”— user_id (FK)</text>
                        <text x="90" y="275" font-size="11" fill="white">ğŸ”— question_id (FK)</text>
                        <text x="90" y="290" font-size="11" fill="white">selected_ans</text>
                        <text x="90" y="305" font-size="11" fill="white">submitted_at</text>

                        <!-- Results Table -->
                        <rect x="280" y="200" width="150" height="120" fill="#00BCD4" stroke="#006064" stroke-width="2" rx="4"/>
                        <text x="355" y="220" text-anchor="middle" font-size="14" font-weight="bold" fill="white">RESULTS</text>
                        <line x1="280" y1="230" x2="430" y2="230" stroke="#006064" stroke-width="1"/>
                        <text x="290" y="245" font-size="11" fill="white">ğŸ”‘ result_id (PK)</text>
                        <text x="290" y="260" font-size="11" fill="white">ğŸ”— user_id (FK)</text>
                        <text x="290" y="275" font-size="11" fill="white">ğŸ”— exam_id (FK)</text>
                        <text x="290" y="290" font-size="11" fill="white">total_score</text>
                        <text x="290" y="305" font-size="11" fill="white">completed_at</text>

                        <!-- Relationships -->
                        <!-- Users to Exams (takes) -->
                        <line x1="160" y1="80" x2="200" y2="80" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="175" y="70" text-anchor="middle" font-size="10" fill="#333" font-weight="600">takes</text>

                        <!-- Exams to Questions (contains) -->
                        <line x1="340" y1="90" x2="380" y2="90" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="360" y="80" text-anchor="middle" font-size="10" fill="#333" font-weight="600">contains</text>

                        <!-- Users to Submissions -->
                        <line x1="90" y1="160" x2="155" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="105" y="180" text-anchor="middle" font-size="10" fill="#333" font-weight="600">submits</text>

                        <!-- Questions to Submissions -->
                        <line x1="380" y1="150" x2="230" y2="240" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="310" y="180" text-anchor="middle" font-size="10" fill="#333" font-weight="600">for</text>

                        <!-- Users to Results -->
                        <line x1="160" y1="140" x2="355" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="240" y="165" text-anchor="middle" font-size="10" fill="#333" font-weight="600">has</text>

                        <!-- Exams to Results -->
                        <line x1="270" y1="160" x2="355" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
                        <text x="310" y="175" text-anchor="middle" font-size="10" fill="#333" font-weight="600">for</text>

                        <!-- Arrow marker -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#666"/>
                            </marker>
                        </defs>
                    </svg>

                </div>

                <!-- Key Information Panel -->
                <div style="display: flex; flex-direction: column; gap: 20px;">
                    
                    <!-- Tables Summary -->
                    <div style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); border-radius: 12px; padding: 20px; box-shadow: 0 8px 16px rgba(33, 150, 243, 0.3);">
                        <div style="font-size: 14px; font-weight: 700; color: #ffffff; margin-bottom: 12px;">ğŸ“Š 5 Core Tables</div>
                        <ul style="list-style: none; margin: 0; padding: 0; font-size: 12px; color: #ffffff; line-height: 2;">
                            <li>â€¢ USERS (Authentication)</li>
                            <li>â€¢ EXAMS (Exam metadata)</li>
                            <li>â€¢ QUESTIONS (Question bank)</li>
                            <li>â€¢ SUBMISSIONS (Answers)</li>
                            <li>â€¢ RESULTS (Scores)</li>
                        </ul>
                    </div>

                    <!-- Relationships -->
                    <div style="background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%); border-radius: 12px; padding: 20px; box-shadow: 0 8px 16px rgba(76, 175, 80, 0.3);">
                        <div style="font-size: 14px; font-weight: 700; color: #ffffff; margin-bottom: 12px;">ğŸ”— Key Relationships</div>
                        <ul style="list-style: none; margin: 0; padding: 0; font-size: 12px; color: #ffffff; line-height: 2;">
                            <li>â€¢ 1:M Users â†’ Submissions</li>
                            <li>â€¢ 1:M Exams â†’ Questions</li>
                            <li>â€¢ 1:M Questions â†’ Submissions</li>
                            <li>â€¢ 1:M Users â†’ Results</li>
                        </ul>
                    </div>

                    <!-- Features -->
                    <div style="background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%); border-radius: 12px; padding: 20px; box-shadow: 0 8px 16px rgba(255, 152, 0, 0.3);">
                        <div style="font-size: 14px; font-weight: 700; color: #ffffff; margin-bottom: 12px;">â­ Database Features</div>
                        <ul style="list-style: none; margin: 0; padding: 0; font-size: 12px; color: #ffffff; line-height: 2;">
                            <li>âœ“ Normalized structure</li>
                            <li>âœ“ Indexed PKs & FKs</li>
                            <li>âœ“ Timestamps tracked</li>
                            <li>âœ“ ACID compliant</li>
                        </ul>
                    </div>

                </div>

            </div>

            <!-- Bottom Resource Link -->
            <div style="background: linear-gradient(90deg, #e3f2fd 0%, #f3e5f5 100%); border-radius: 12px; padding: 20px; border: 2px solid #2196F3; text-align: center;">
                <div style="font-size: 14px; font-weight: 700; color: #1a1a1a; margin-bottom: 10px;">ğŸ“¥ Full ER Diagram Documentation</div>
                <div style="font-size: 13px; color: #555555; margin-bottom: 10px; font-family: monospace; background: white; padding: 12px; border-radius: 6px; word-break: break-all;">
                    ğŸ”— github.com/saddamhdev/icsQuiz<br/>
                    ğŸ“„ Database Design â†’ ER Diagram.pdf
                </div>
                <div style="font-size: 12px; color: #666666;">Complete database schema with all constraints and relationships</div>
            </div>

        </div>
    </div>

    <script>
        async function downloadPNG() {
            const slide = document.getElementById('slide');
            const canvas = await html2canvas(slide, {
                backgroundColor: '#ffffff',
                scale: 2,
                logging: false
            });
            
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            link.download = 'ER-Diagram.png';
            link.click();
        }
    </script>
</body>
</html>