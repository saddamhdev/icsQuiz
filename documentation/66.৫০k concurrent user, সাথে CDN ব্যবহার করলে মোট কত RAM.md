ржЦрзБржм ржнрж╛рж▓ ржкрзНрж░рж╢рзНржи! ржПржмрж╛рж░ ржзрж░рзЗ ржзрж░рзЗ рж╣рж┐рж╕рж╛ржм ржХрж░рж┐ тАУ **рзлрзжk concurrent user, рж╕рж╛ржерзЗ CDN ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ ржорзЛржЯ ржХржд RAM рж▓рж╛ржЧржмрзЗ?**

ржЖржорж┐ ржжрзБтАЩржнрж╛ржмрзЗ ржмрж▓ржЫрж┐:

1. рж╢рзБржзрзБ **ICS Quiz User Service (Spring Boot pods)** ржПрж░ ржЬржирзНржп RAM
2. ржПржХ рж╕ржЩрзНржЧрзЗ **ржкрзБрж░рзЛ stack (OS + k3s + NGINX + Redis + PostgreSQL + User Service)** ржПрж░ ржЬржирзНржп RAM

---

## ЁЯза ржкрзНрж░ржержорзЗ ржПржХржЯрж╛ ржмрж╛рж╕рзНрждржм assumption ржирзЗржЗ

ржзрж░рж┐ рждрзБржорж┐:

* **CDN (Cloudflare)** ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЛ
* MCQ JSON ржкрзБрж░рзЛржЯрж╛ **CDN cache** рж╣рзЯрзЗ ржЧрзЗржЫрзЗ
* Cache HIT rate ржХржоржкржХрзНрж╖рзЗ **90%**

рждрж╛рж░ ржорж╛ржирзЗ:

* рзлрзж,рзжрзжрзж user ржПржХрж╕рж╛ржерзЗ ржПрж▓рзЗ
* **рзпрзж% = рзкрзл,рзжрзжрзж** request CDN ржерзЗржХрзЗ serve рж╣ржмрзЗ
* рж╢рзБржзрзБ **рззрзж% = рзл,рзжрзжрзж** request рждрзЛржорж╛рж░ cluster-ржП ржЖрж╕ржмрзЗ

рждрж╛рж░ ржоржзрзНржпрзЗ ржЖржмрж╛рж░:

* Ingress NGINX cache ржерж╛ржХржмрзЗ
* Backend (Spring Boot) ржП ржпрж╛ржмрзЗ рж╣рзЯрждрзЛ рззрзжтАУрзирзж% of рзл,рзжрзжрзж

ЁЯСЙ Effective backend load тЙИ **рзлрзжрзжтАУрзз,рзжрзжрзж user equivalent**

ржорж╛ржирзЗ backend-ржПрж░ ржжрж┐ржХ ржерзЗржХрзЗ ржПржЯрж╛ ржкрзНрж░рж╛рзЯ *5k user system* ржПрж░ ржорждрзЛржЗ ржЖржЪрж░ржг ржХрж░ржмрзЗред

---

## 1я╕ПтГг рж╢рзБржзрзБ **User Service Pods** ржПрж░ ржЬржирзНржп RAM (CDN ржерж╛ржХрж▓рзЗ)

ржЖржорж╛ржжрзЗрж░ ржЖржЧрзЗрж░ рж╣рж┐рж╕рж╛ржм ржЕржирзБржпрж╛рзЯрзА:

* рззржЯрж╛ Spring Boot (Virtual Thread) pod тЙИ **400 MiB** рж░рж╛ржЦрж▓рзЗ ржнрж╛рж▓
* рззржЯрж╛ pod roughly **150 RPS** handle ржХрж░рждрзЗ ржкрж╛рж░рзЗ (NGINX cache ржерж╛ржХрж▓рзЗ ржЖрж░ржУ ржмрзЗрж╢рж┐)

ржПржЦржи ржзрж░рзЛ:

* Cluster ржП effective рзлрзжрзж тАУ рзз,рзжрзжрзж concurrent request ржЖрж╕ржЫрзЗ
* ржЖржорж░рж╛ safe ржзрж░рзЗ ржирж┐ржЗ: **рзкржЯрж╛ pod** рж░рж╛ржЦржм

рждрж╛рж╣рж▓рзЗ:

```text
4 pods ├Ч 400 MiB тЙИ 1600 MiB тЙИ 1.6 GB RAM
```

ЁЯСЙ **CDN ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ рзлрзжk user ржПрж░ ржЬржирзНржп User Service layer-ржП roughly 1.5тАУ2 GB RAM-ржЗ ржпржерзЗрж╖рзНржЯред**

---

## 2я╕ПтГг ржкрзБрж░рзЛ Stack ржзрж░рзЗ ржорзЛржЯ RAM (рззржЯрж╛ Node ржП рж╕ржм ржерж╛ржХрж▓рзЗ)

ржПржЦржи ржзрж░рзЛ рждрзБржорж┐ рж╕ржм ржПржХ node ржП ржЪрж╛рж▓рж╛ржЪрзНржЫрзЛ:

* OS + k3s + system overhead
* NGINX Ingress
* Redis
* PostgreSQL
* ICS Quiz User Service (Spring Boot pods)

ржПржХржЯрж╛ practical breakdown ржжрзЗржЗ ЁЯСЗ

### ЁЯЦе Component-wise RAM

| Component                  | Safe RAM (approx) |
| -------------------------- | ----------------- |
| OS + k3s + system          | **2 GB**          |
| NGINX Ingress (with cache) | **256тАУ512 MB**    |
| Redis                      | **512 MB тАУ 1 GB** |
| PostgreSQL                 | **2тАУ3 GB**        |
| ICS User Service (4 pods)  | **1.6тАУ2 GB**      |
| **Total (safe)**           | **6тАУ8 GB**        |

### тЬЕ Practical Recommendation

ЁЯСЙ **CDN ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ рзлрзжk concurrent user ржПрж░ ржЬржирзНржп:**

* **рзо GB RAM ржерж╛ржХрж╛ ржПржХржЯрж╛ржЗ node-ржП ржкрзБрж░рзЛ stack ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп comfortable & safe**
* ржЪрж╛ржЗрж▓рзЗ ржПржХржЯрзБ future buffer рж░рж╛ржЦрждрзЗ **рззрзм GB ржирж┐рж▓рзЗ ржПржХржжржо ржЖрж░рж╛ржорж╕рзЗ** multi-service / future feature ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░ржмрзЗ

---

## ЁЯФе One-line Short Answer

> **CDN + NGINX cache ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ рзлрзжk concurrent student ржПрж░ ржЬржирзНржп:**
>
> * рж╢рзБржзрзБ **User Service pods-ржПрж░ ржЬржирзНржп ~2 GB RAM** enough
> * ржкрзБрж░рзЛ stack (OS + k3s + NGINX + Redis + PostgreSQL + User Service) ржПрж░ ржЬржирзНржп
>   **рзмтАУрзо GB RAM** practical and safe

---

ржпржжрж┐ ржЪрж╛ржУ, ржЖржорж┐ ржПржЦржи:

* **CDN + NGINX + Redis + Spring Boot** рж╕рж╣
* ЁЯФ╣ рзо GB ржЖрж░ ЁЯФ╣ рззрзм GB тАУ ржПржЗ ржжрзБржЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ server plan ржПрж░ ржЬржирзНржп
  exact pod рж╕ржВржЦрзНржпрж╛, RAM ржмрзНржпржмрж╣рж╛рж░, ржЖрж░ ржХрзЛржи node ржП ржХрзА ржЪрж▓ржмрзЗ тАУ **ржПржХржЯрж╛ ready-made architecture ржкрзНрж▓рзНржпрж╛ржи** ржмрж╛ржирж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред
